<!DOCTYPE html>
<html>
<head>
  <title>Music - beta v bet</title>
  <script src="https://connect.soundcloud.com/sdk/sdk-3.3.2.js"></script>

  <style>
    body {
      margin: 0;
      background: #0f0f0f;
      color: white;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    input {
      padding: 10px;
      width: 300px;
      border-radius: 6px;
      border: none;
    }

    button {
      padding: 10px;
      margin-left: 10px;
      border: none;
      border-radius: 6px;
      background: #6c2bd9;
      color: white;
      cursor: pointer;
    }

    .result {
      margin-top: 15px;
      cursor: pointer;
      padding: 10px;
      background: #222;
      border-radius: 6px;
    }

    iframe {
      width: 100%;
      height: 166px;
      margin-top: 20px;
      border: none;
    }
  </style>
</head>

<body>

<h2>Search Music</h2>

<input type="text" id="searchInput" placeholder="Search for a song">
<button onclick="searchMusic()">Search</button>

<div id="results"></div>

<iframe id="player"></iframe>

<script>
const CLIENT_ID = "fqaiLMkkRybi9I90TsqvLeGGsK3rVzwH";

SC.initialize({
  client_id: CLIENT_ID
});

function searchMusic() {
  const query = document.getElementById("searchInput").value;

  SC.get('/tracks', { q: query, limit: 5 })
    .then(function(tracks) {
      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "";

      tracks.forEach(track => {
        const div = document.createElement("div");
        div.className = "result";
        div.innerText = track.title + " - " + track.user.username;
        div.onclick = () => playTrack(track.permalink_url);
        resultsDiv.appendChild(div);
      });
    });
}

function playTrack(url) {
  document.getElementById("player").src =
    "https://w.soundcloud.com/player/?url=" + encodeURIComponent(url) + "&auto_play=true";
}
</script>

</body>
</html>
